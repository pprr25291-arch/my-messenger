if (file.mimetype.startsWith('image/')) {
    fileContent = `
        <img src="${file.thumbnail || file.path}" 
             class="file-preview" 
             style="max-width: 200px; max-height: 200px; border-radius: 8px; cursor: pointer;"
             onclick="window.privateChatInstance.viewImage('${file.path}')"
             alt="${file.originalName}"
             onerror="if(this.src !== '${file.path}') this.src='${file.path}'">
    `;
}